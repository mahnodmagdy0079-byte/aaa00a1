# ุณุฌู ุงูุชุบููุฑุงุช - ุชุญุฏูุซ ุงูุจุฑูุงูุฌ ููุนูู ูุน RLS

## ุงูุฅุตุฏุงุฑ 2.0 - ุชุญุฏูุซ ุงูุฃูุงู
**ุงูุชุงุฑูุฎ**: ุงูููู  
**ุงูุณุจุจ**: ุฅุถุงูุฉ Row Level Security (RLS) ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ุงูุชุบููุฑุงุช ุงูุฑุฆูุณูุฉ

### ๐ ุงูุฃูุงู
- **ูุจู**: ุงููุตูู ุงููุจุงุดุฑ ููุงุนุฏุฉ ุงูุจูุงูุงุช ุนุจุฑ Supabase API Key
- **ุจุนุฏ**: ุงุณุชุฎุฏุงู API endpoints ุขููุฉ ูุน JWT Token

### ๐ ุชุณุฌูู ุงูุฏุฎูู
- **ูุจู**: `/auth/v1/token?grant_type=password`
- **ุจุนุฏ**: `/api/auth/signin`
- **ุฌุฏูุฏ**: ุญูุธ JWT Token ูููุตุงุฏูุฉ

### ๐ฐ ุฌูุจ ุงูุฑุตูุฏ
- **ูุจู**: `GET /rest/v1/user_wallets?select=balance&user_id=eq.{userId}`
- **ุจุนุฏ**: `POST /api/wallet/balance` ูุน Authorization header

### ๐ฆ ุฌูุจ ูุนูููุงุช ุงูุจุงูุฉ
- **ูุจู**: `GET /rest/v1/licenses?select=package_name,end_date&user_name=eq.{userName}`
- **ุจุนุฏ**: `POST /api/license/check` ูุน user_email

### ๐ ุฌูุจ ุณุฌู ุงูุทูุจุงุช
- **ูุจู**: `GET /rest/v1/tool_requests?select=...&user_name=eq.{userName}`
- **ุจุนุฏ**: `POST /api/tool-requests/history` ูุน Authorization header

### ๐ ุดุฑุงุก ุงูุฃุฏูุงุช
- **ูุจู**: ูู ููู ููุฌูุฏุงู
- **ุจุนุฏ**: `POST /api/tool-requests/purchase` ูุน Authorization header

---

## ุงููููุงุช ุงููุญุฏุซุฉ

| ุงูููู | ุงูุชุบููุฑ | ุงููุตู |
|-------|---------|--------|
| `LoginForm.cs` | ุชุญุฏูุซ | ุงุณุชุฎุฏุงู API endpoint ุฌุฏูุฏ ูุญูุธ ุงูุชููู |
| `Program.cs` | ุชุญุฏูุซ | ุชูุฑูุฑ ุงูุชููู ููู Form1 |
| `Form1.cs` | ุงุณุชุจุฏุงู ูุงูู | ุงุณุชุฎุฏุงู API endpoints ุจุฏูุงู ูู Supabase ูุจุงุดุฑุฉ |

---

## API Endpoints ุงูุฌุฏูุฏุฉ

### ุงููุตุงุฏูุฉ
```http
POST /api/auth/signin
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password"
}
```

### ุงูุฑุตูุฏ
```http
POST /api/wallet/balance
Authorization: Bearer jwt_token
Content-Type: application/json

{
  "user_id": "user_id"
}
```

### ุงูุจุงูุฉ
```http
POST /api/license/check
Content-Type: application/json

{
  "user_email": "user@example.com"
}
```

### ุณุฌู ุงูุทูุจุงุช
```http
POST /api/tool-requests/history
Authorization: Bearer jwt_token
Content-Type: application/json

{
  "user_email": "user@example.com"
}
```

### ุดุฑุงุก ุฃุฏุงุฉ
```http
POST /api/tool-requests/purchase
Authorization: Bearer jwt_token
Content-Type: application/json

{
  "user_id": "user_id",
  "user_name": "user_name",
  "tool_name": "tool_name",
  "tool_price": 10.0,
  "duration_hours": 24
}
```

### ูุงุฆูุฉ ุงูุฃุฏูุงุช
```http
GET /api/tools
```

---

## ุงููุฒุงูุง ุงูุฌุฏูุฏุฉ

### โ ุงูุฃูุงู
- ุญูุงูุฉ ุงูุจูุงูุงุช ุนุจุฑ RLS
- ูุตุงุฏูุฉ ุขููุฉ ุจู JWT Token
- ุนุฏู ุงููุตูู ุงููุจุงุดุฑ ููุงุนุฏุฉ ุงูุจูุงูุงุช

### โ ุงูุงุณุชูุฑุงุฑ
- API endpoints ูุณุชูุฑุฉ
- ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- ุงุณุชุฌุงุจุฉ ููุญุฏุฉ

### โ ุงููุฑููุฉ
- ุณูููุฉ ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ
- ุฅููุงููุฉ ุงูุชุญูู ูู ุงููุตูู
- ุชุณุฌูู ุฃูุถู ููุนูููุงุช

---

## ุฎุทูุงุช ุงูุชุทุจูู

1. **ูุณุฎ ุงููููุงุช**:
   ```bash
   copy Form1_Updated.cs Form1.cs /Y
   ```

2. **ุญุฐู ุงููููุงุช ุงููุคูุชุฉ**:
   ```bash
   del Form1_Updated.cs
   ```

3. **ุจูุงุก ุงููุดุฑูุน**:
   - ูุชุญ Visual Studio
   - Build โ Rebuild Solution

4. **ุงุฎุชุจุงุฑ ุงูุจุฑูุงูุฌ**:
   - ุชุดุบูู ุงูุจุฑูุงูุฌ
   - ุชุณุฌูู ุงูุฏุฎูู
   - ุงูุชุญูู ูู ุฌูุจ ุงูุจูุงูุงุช

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฌูุจ ุงูุจูุงูุงุช"
**ุงูุญู**: ุชุญูู ูู:
- ุงุชุตุงู ุงูุฅูุชุฑูุช
- ุตุญุฉ API endpoints
- ุตุญุฉ ุงูุชููู

### ูุดููุฉ: "ุงุณู ุงููุณุชุฎุฏู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ"
**ุงูุญู**: ุชุญูู ูู:
- ุตุญุฉ ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู
- ุนูู API endpoint `/api/auth/signin`

### ูุดููุฉ: "ุงูุฑุตูุฏ ุบูุฑ ูุงู"
**ุงูุญู**: ุชุญูู ูู:
- ุฌูุจ ุงูุฑุตูุฏ ุนุจุฑ `/api/wallet/balance`
- ุตุญุฉ ุงูุชููู ูู Authorization header

---

## ููุงุญุธุงุช ูููุฉ

- โ๏ธ **ููู**: ุชุฃูุฏ ูู ุนูู ุฌููุน API endpoints ูุจู ุชุดุบูู ุงูุจุฑูุงูุฌ
- ๐ **ุฃูุงู**: ุงูุชููู ูู ูุฏุฉ ุตูุงุญูุฉ ูุญุฏุฏุฉ
- ๐ฑ **ุงุฎุชุจุงุฑ**: ุงุฎุชุจุฑ ุฌููุน ุงููุธุงุฆู ุจุนุฏ ุงูุชุญุฏูุซ
- ๐ **ูุณุฎ ุงุญุชูุงุทู**: ุงุญุชูุธ ุจูุณุฎุฉ ูู ุงููููุงุช ุงููุฏููุฉ

---

## ุงูุฏุนู

ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู:
1. ุฑุงุฌุน ููู `README_Updates.md`
2. ุชุญูู ูู ุงุณุชุฌุงุจุฉ API endpoints
3. ุฑุงุฌุน ุฑุณุงุฆู ุงูุฎุทุฃ ูู Console
4. ุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ

---

**ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ! ๐**

