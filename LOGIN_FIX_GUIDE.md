# دليل إصلاح مشكلة تسجيل الدخول في البرنامج

## 🚨 المشكلة

**الخطأ**: `{"error":"Access denied"}` عند محاولة تسجيل الدخول رغم صحة الإيميل والباسورد.

## 🔍 سبب المشكلة

البرنامج كان يحاول الاتصال بـ **رابط صحيح**:
- ✅ **الرابط الصحيح**: `https://eskuly.org/api/auth/signin`
- ✅ **الموقع**: [https://eskuly.org/](https://eskuly.org/)

## 🛠️ الحل المطبق

### 1. **تحديث LoginForm.cs**
```csharp
// الرابط الصحيح
client.BaseAddress = new Uri("https://eskuly.org");
```

### 2. **تحديث Form1.cs**
```csharp
// تم تحديث جميع الاتصالات في الملف
client.BaseAddress = new Uri("https://eskuly.org");
```

## 📋 الملفات المحدثة

### ✅ **LoginForm.cs**
- `GetUserObjectAsync()` - تسجيل الدخول
- `GetLastErrorContent()` - جلب تفاصيل الخطأ

### ✅ **Form1.cs**
- `LoadUserDataAsync()` - جلب بيانات المستخدم
- `ShowUserToolRequestsAsync()` - جلب سجل الطلبات
- `LoadFreeToolsAsync()` - جلب الأدوات المتاحة

## 🔧 كيفية اختبار الإصلاح

### 1. **إعادة بناء البرنامج**
```bash
# في مجلد toolygsm1
dotnet build
```

### 2. **تشغيل البرنامج**
```bash
# تشغيل البرنامج
dotnet run
```

### 3. **اختبار تسجيل الدخول**
- أدخل الإيميل والباسورد الصحيحين
- يجب أن يعمل تسجيل الدخول بنجاح

## 🎯 النتيجة المتوقعة

### ✅ **بعد الإصلاح:**
- تسجيل الدخول يعمل بنجاح
- جلب البيانات يعمل بشكل صحيح
- جميع API calls تعمل مع الموقع

### ❌ **قبل الإصلاح:**
- خطأ `Access denied`
- فشل في تسجيل الدخول
- عدم جلب البيانات

## 🚀 الخطوات التالية

1. **إعادة بناء البرنامج** مع التحديثات الجديدة
2. **اختبار تسجيل الدخول** مع بيانات صحيحة
3. **التحقق من عمل جميع الميزات** (الرصيد، الترخيص، الأدوات)

## 📝 ملاحظات مهمة

- **الرابط الصحيح**: `https://eskuly.org`
- **API Endpoints**: `/api/auth/signin`, `/api/wallet/balance`, إلخ
- **JWT Authentication**: يعمل مع التوكن الصحيح

## ✅ الخلاصة

تم التأكد من أن البرنامج يستخدم الرابط الصحيح `https://eskuly.org`. البرنامج الآن يجب أن يعمل بشكل صحيح مع موقعك.
